<!-- # URLå¤§çˆ†ç‚¸ -->

![å°é¢](https://raw.githubusercontent.com/pushmetop/resource/master/30-seconds-for-everyday/url/poster.png)

## ç®€ä»‹

> ğŸ‘‡ æ›´æ–°å¹³å°å¤šå¶å°”ä¼šæ¼æ‰ï¼Œå¦‚æœè§‰å¾—æ–‡ç« è¿˜è¡Œç‚¹ä¸ª `star` é˜²èµ°å¤±ã€‚

> ğŸ‘‰ [ä¸€å¤© 30 ç§’ â± ä¸€æ®µä»£ç  âœï¸ ä¸€ä¸ªåœºæ™¯ ğŸ–¼](https://github.com/pushmetop/30-seconds-for-everyday) ğŸ‘ˆ

ä¼´éšç€å¾®ä¿¡æ¶ˆæ¯çš„æç¤ºéŸ³ `å°å››` å‘æ¥ä¸€æ®µä»£ç è¯´ `ä¸çŸ¥é“ä¸ºä»€ä¹ˆè¯·æ±‚ä¸åˆ°é¡µé¢æ•°æ®`ï¼š

```javascript
axios.get('users', {
    params: { ids: [1, 2, 3] }
})
```

å°äºŒä¸€çœ‹å¤§æ¦‚ç‡æ˜¯ `query` ä¸­`æ•°ç»„`ä¼ é€’æ–¹å¼å¼•èµ·çš„ï¼Œç”±äºåç«¯å®ç°è§£ææ•°ç»„ `ids:[5, 6, 100]` å¯èƒ½æœ‰ä»¥ä¸‹å‡ ç§æ–¹å¼ï¼š

* bracket: `ids[]=1&ids[]=2&ids[]=3`
* index: `ids[0]=1&ids[1]=2&ids[3]=3`
* comma: `ids=1,2,3`
* bracket: `ids=1&ids=2&ids=3`

å°å››åˆ†åˆ«æµ‹è¯•åä¾¿æŠŠé—®é¢˜è§£å†³äº†ï¼Œè¿™ä¹Ÿè®©å°äºŒæƒ³èµ· `å°ç†ŠçŒ«å“¥å“¥` åœ¨å¼€å‘çš„æ—¶å€™ï¼Œä¹Ÿé‡åˆ°è¿‡è¿™ä¸ªé—®é¢˜ç½‘ä¸Šä¸€æœå‘ç°åˆ«äººç”¨ [qs](https://www.npmjs.com/package/qs) åº“ä¸­çš„ `stringify` ç›´æ¥ä»£ç ä¸€è¯•`æ²¡æŠ¥é”™èƒ½è¿è¡Œ`ï¼Œä¸ç®¡å®ƒçš„åŸç†æ˜¯ä»€ä¹ˆï¼Œç°åœ¨æƒ³æƒ³æŒºå¯æ€•çš„ã€‚

> è™½ç„¶å¤©å¤©å’Œ `URL` æ‰“äº¤é“ä½†å¹¶ä¸æ˜¯æ‰€æœ‰äººéƒ½æ‡‚å®ƒã€‚

> å¯¹äºä¸ºä»€ä¹ˆä»£ç èƒ½è¿è¡Œä¹Ÿä¸æ˜¯æ‰€æœ‰äººéƒ½ä¼šå»`æ·±ç©¶å®ƒ`ã€‚

## ç°åŸå½¢

åˆ©ç”¨ `URL()` å¯¹è±¡å¯ä»¥å¿«é€Ÿçš„æŠŠä¸€ä¸ª `urlåœ°å€` æ‰“å›åŸå½¢ï¼š

##### è„šæœ¬

```javascript
const url = new URL('http://www.pushme.top/users?sort_by=asc#page=userlist')
console.log(url)
```

##### è¾“å‡º

```javascript
{
    hash: "#page=userlist"
    host: "www.pushme.top"
    hostname: "www.pushme.top"
    href: "http://www.pushme.top/users?sort_by=asc#page=userlist"
    origin: "http://www.pushme.top"
    password: ""
    pathname: "/users"
    port: ""
    protocol: "http:"
    search: "?sort_by=asc"
    searchParams: URLSearchParams {}
    username: ""
}
```

æ²¡æƒ³åˆ°å§ å°å°çš„ä¸€æ®µ `urlåœ°å€` é‡Œé¢å±…ç„¶æœ‰è¿™ä¹ˆå¤šå±æ€§ï¼Œåœ¨è¿™é‡Œæ¯”è¾ƒé‡è¦çš„ `hash` å’Œ `searchParams` æ”¾åˆ°åé¢å•ç‹¬è¿›è¡Œè®²è§£ã€‚

> æ¨èæ‰“å¼€æ§åˆ¶å°æŠŠè„šæœ¬è¿è¡Œä¸€ä¸‹ï¼Œè¿™æ ·é˜…è¯»çš„æ—¶å€™å°±ä¸éœ€è¦ä¸Šä¸‹å¯¹ç…§æŸ¥çœ‹äº†ã€‚

## host å’Œ hostname

çœ¼å°–çš„åŒå­¦è‚¯å®šå‘ç°äº† `host` å’Œ `hostname` å±…ç„¶ä¸€æ¨¡ä¸€æ ·è¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ

å›å¿†ä¸€ä¸‹å¼€å‘ç»å¸¸åœ¨è§åˆ°çš„ `localhost:8080`ï¼Œè¿™é‡Œå‡ºç°äº†ç«¯å£å· `8080` è€Œå¹³æ—¶ä½¿ç”¨è®¿é—®ä¸€äº›ç½‘ç«™çš„æ—¶å€™å´æ²¡æœ‰å¸¦ä¸Šç«¯å£å·ã€‚è¿™æ˜¯å› ä¸º `urlåœ°å€` ä¼šé»˜è®¤ç«¯å£å·ä¸º `80`ï¼Œæ‰€ä»¥ä½ ä»”ç»†çœ‹çœ‹ä¼šå‘ç°ä¸Šé¢ `port` çš„å€¼ä¸ºç©ºã€‚

è€Œ `host` å’Œ `hostname` çš„åŒºåˆ«ä¾¿æ˜¯æœ‰ `port` çš„æ—¶å€™ `host` ä¼šåŒ…å«ç«¯å£å·ï¼Œè€Œ `hostname` ä¸ä¼šåŒ…å«ã€‚

## protocol å’Œ origin

`protocol` æŒ‡çš„ä¾¿æ˜¯ `åè®®` æœ€å¸¸è§çš„æœ‰ `http` å’Œ `https`ï¼Œå½“ç„¶ç°åœ¨æµè§ˆå™¨å†ä¸è¾“å…¥åè®®æ—¶ä¼šè‡ªåŠ¨å¸®ä½ åŠ ä¸Šï¼Œä¸è¿‡åœ¨ `URL()` ä¸å¸¦ä¸Šåè®®å¯æ˜¯ä¼šæŠ¥é”™çš„å“¦ã€‚`origin` åˆ™ä¸º `protocel` å’Œ `host` æ‹¼æ¥ç»„æˆã€‚

## search å’Œ searchParams

##### åŸºç¡€

`?search=a` ä¸­ `query` ä»¥ç¬¬ä¸€ä¸ª`?`å¼€å§‹è‡³`è¡Œå°¾`æˆ–`#`ç»“æŸã€‚ç”¨äºå‘åç«¯ä¼ é€’ä¸€äº›æ•°æ®ï¼Œæ•°æ®ä½¿ç”¨ `&` è¿›è¡Œåˆ†éš”ï¼Œå€¼ä½¿ç”¨ `=` åˆ†éš”ã€‚é€šè¿‡ä¸€æ®µä»£ç æ¥ç†è§£ä¸€ä¸‹ï¼š

```javascript
const query = 'id=1&sort=asc&hello=world';
// å¯¹ & åˆ†å‰²å–å¾—æ•°æ®å¯¹
const data = query.split('&').reduce((data,keyValue) => {
    const [ key, value ] = keyValue.split('=');
    return (data[key] = value, data);
}, {});

// è¾“å‡º {id: "1", sort: "asc", hello: "world"}
console.log(data);
```

è¿™å°±æ˜¯ `query` æœ€åŸºç¡€çš„æ•°æ®å¯¹çš„ç»„åˆæ–¹å¼ï¼Œå½“ç„¶å¼€å¤´çš„å››ç§ `æ•°ç»„` çš„è¡¨è¾¾æ–¹å¼éœ€è¦è¿›è¡Œå¦å¤–çš„å¤„ç†ï¼Œæ— å¤–ä¹å°±æ˜¯å¯¹ `key` çš„æ”¶é›† å’Œ `value` çš„åˆ¤æ–­ã€‚ä¸è¿‡è¿™éƒ¨åˆ†åŸºæœ¬ä¸Šåç«¯çš„æ¡†æ¶éƒ½å¸®æˆ‘ä»¬å¤„ç†å¥½äº†ï¼Œå‰ç«¯ä¹Ÿå¯ä»¥ä½¿ç”¨ `qs`ã€`query-string`ã€`qss` ç­‰åº“æ¥å®Œæˆã€‚

> é¢˜å¤–è¯ï¼šè¿™å‡ ä¸ªåº“ä»£ç éƒ½æŒºå°‘çš„ï¼Œå€¼å¾—ä¸€è¯»è¯´ä¸å®šæœ‰æ–°æ”¶è·ã€‚

##### åŠ å·ä¸ç©ºæ ¼

æ¯å¤©ä½¿ç”¨çš„ `ç™¾åº¦` å’Œ `è°·æ­Œ` ä¸­ä¸çŸ¥é“å¤§å®¶æœ‰æ²¡æœ‰ä¸»è¦åˆ°è¿™å‡ ä¸ªç»†èŠ‚ï¼š

* è¾“å…¥ `https://www.baidu.com/s?wd=å°äºŒ+pushmetop` æœç´¢æ¡†ä¸­å‡ºç°çš„æ˜¯`å°äºŒ pushmetop`ï¼Œåœ°å€æ ä¸­urlåœ°å€çš„ `+` ç¥å¥‡çš„å˜æˆäº† `ç©ºæ ¼`ã€‚
* è¾“å…¥ `https://www.baidu.com/s?wd=å°äºŒ pushmetop` æœç´¢æ¡†ä¸­å‡ºç°çš„æ˜¯`å°äºŒ pushmetop`ï¼Œåœ°å€æ ä¸­urlåœ°å€çš„ `ç©ºæ ¼` çš„å˜æˆ `%20`ã€‚
* è¾“å…¥ `https://www.baidu.com/s?wd=å°äºŒ%2Bpushmetop` æœç´¢æ¡†ä¸­å‡ºç°çš„æ˜¯`å°äºŒ+pushmetop`ï¼Œåœ°å€æ ä¸­urlåœ°å€çš„ `%2B` çš„å˜æˆ `+`ã€‚

å…·ä½“åŸå› å¯ä»¥æŸ¥çœ‹ [ç»´åŸºç™¾ç§‘](https://zh.wikipedia.org/wiki/%E7%99%BE%E5%88%86%E5%8F%B7%E7%BC%96%E7%A0%81) å…³äº `ä¿ç•™å­—ç¬¦çš„ç™¾åˆ†å·ç¼–ç ` ã€‚

##### URL ç¼–ç 

åœ¨ `æ˜é‡‘` ç­‰ç½‘ç«™ç‚¹å‡»é“¾æ¥éƒ½ä¼šå¿«é€Ÿçš„é—ªç°ç±»ä¼¼ `http://www.pushmetop.com?redirect=xxxxx` çš„ `urlåœ°å€`ï¼Œä¼šå‘ç° `redirect` å¯¹åº”çš„é‡å®šå‘åœ°å€ä¼šæ˜¯ä¸€å †å¤¹å¸¦ `%` çš„ä¹±ç è¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ

è®©æˆ‘ä»¬å‡è®¾éœ€è¦è·³è½¬çš„é“¾æ¥æ˜¯ `www.test.com?hello=world&id=1`,æŠŠæ•´ä¸ªé“¾æ¥æ‹¼æ¥èµ·æ¥åˆ™ä¸ºï¼š

```
http://www.pushmetop.com?redirect=www.test.com?hello=world&id=1
```

æ ¹æ®ä¸€å¼€å§‹çš„å®šä¹‰ `è§£æå€¼` å’Œ `é¢„æœŸå€¼` å®Œå…¨ä¸åŒäº†ï¼š

```javascript
// è§£æå€¼
{
    "redirect": "www.test.com?hello=world",
    "id": "1',
}

// é¢„æœŸå€¼
{
    "redirect": "www.test.com?hello=world&id=1"
}
```

ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ä¾¿è¯ç”Ÿäº† `URLç¼–ç ` æ¥è§£å†³é—®é¢˜ï¼š

*  `encodeURIComponent()` å’Œ `decodeURIComponent()` æ¨èä½¿ç”¨ã€‚
*  `encodeURI()` å’Œ `decodeURI()` å¯¹æ¯”å‰è€…ä¸ä¼šå¯¹ `"; / ? : @ & = + $ , #"` è¿™äº›å­—ç¬¦ç¼–ç ã€‚
*  `escape()` å’Œ `unescape()` ä¸æ¨èä½¿ç”¨ã€‚

##### ä¾‹å­

```javascript
let redirect = 'www.test.com?hello=world&id=1';
redirect = encodeURIComponent(redirect);

let url = `http://www.pushmetop.com?redirect=${redirect}`;
url = new URL(url)

// è¾“å‡º: www.test.com?hello=world&id=1
console.log(url.searchParams.get('redirect'))
```

## hash

`#hash` ä¸­ `fragment` ä»¥ `#` ä¸ºå¼€å§‹ `è¡Œå°¾` ä¸ºç»“æŸã€‚åœ¨ [å›åˆ°é¡¶éƒ¨](https://github.com/pushmetop/30-seconds-for-everyday/blob/master/posts/scroll.md) ä¸­æœ‰æåˆ°è¿‡åˆ©ç”¨hashé”šç‚¹æ¥è¿›è¡Œè·³è½¬ï¼Œå¦‚æœå¤§å®¶æ³¨æ„è§‚å¯Ÿçš„è¯ä¼šå‘ç° `hash` çš„æ”¹å˜ä¸ä¼šå¼•èµ·é¡µé¢çš„åˆ·æ–°ã€‚

åœ¨ `Angular.js`ã€`Vue Router` ç­‰åº“ä¸­ï¼Œä¼šåˆ©ç”¨åœ¨ `html5` ä¸­æä¾›äº† `history` çš„ä¸€ç³»åˆ—æ“ä½œï¼Œæ¥å¸®åŠ©æˆ‘ä»¬ä¸åˆ·æ–°é¡µé¢ç®¡ç†  `url`ã€‚ä½†æ˜¯åœ¨ä¸€äº›æ—§çš„æµè§ˆå™¨ä¸Šå¹¶ä¸å…¼å®¹æ—¶ï¼Œä¼šåˆ©ç”¨ `hash` ä¸ä¼šä¸»åŠ¨è§¦å‘æµè§ˆå™¨ `reload` çš„ç‰¹æ€§æ¥ä¿®æ”¹ `location.hash` æ¥ç®¡ç†è·¯ç”±ã€‚ å½“ç„¶ `hash` çš„å¦å¤–ä¸€ä¸ªç‰¹ç‚¹æ˜¯å¯ä»¥è¢«ä¿å­˜ä¸ºä¹¦ç­¾ï¼Œä¹Ÿæ˜¯ä¸€å¤§ä¼˜ç‚¹ã€‚

`hash` çš„å°å¦™ç”¨ä¹Ÿå¯ä»¥åƒ `query` é‚£æ ·åˆ©ç”¨ `&` å’Œ `=` æ¥å­˜å–æ•°æ®ï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥å®šåˆ¶å±äºä½ çš„è§„åˆ™ã€‚

## href å’Œ pathname

`href` ä¸ºæ•´ä¸ª `urlåœ°å€`ã€‚è€Œ `pathname` å±æ€§åŒ…å« URL çš„æ•´ä¸ªè·¯å¾„éƒ¨åˆ†ã€‚å®ƒè·Ÿåœ¨ `host` ï¼ˆåŒ…æ‹¬ `port`ï¼‰åé¢ï¼Œæ’åœ¨ `query` æˆ– `hash` ç»„æˆéƒ¨åˆ†çš„å‰é¢ä¸”è¢« ASCII é—®å·ï¼ˆ?ï¼‰æˆ–å“ˆå¸Œå­—ç¬¦ï¼ˆ#ï¼‰åˆ†éš”ã€‚

## username å’Œ password

`username` å’Œ `password` åœ¨æ—¥å¸¸ä½¿ç”¨ä¸­å¾ˆå°‘ç”¨ï¼Œå®ƒä»¬å¯ä»¥åˆç§°ä¸º `auth`ã€‚è¯¥å­—ç¬¦ä¸²è·Ÿåœ¨ `protocol` å’ŒåŒæ–œæ ï¼ˆå¦‚æœæœ‰ï¼‰çš„åé¢ï¼Œæ’åœ¨ `host` éƒ¨åˆ†çš„å‰é¢ä¸”è¢«ä¸€ä¸ª ASCII çš„ at ç¬¦å·ï¼ˆ@ï¼‰åˆ†éš”ï¼š

```
http://username:password@www.pushme.top/test/blah?something=123
```

## ç»“å°¾

æœ¬æ¥åªæ˜¯æƒ³è®¨è®º `hash` å’Œ `search` ï¼Œç»“æœå…¨éƒ½è¿‡ä¸€éï¼Œä»Šå¤©å°±è¾›è‹¦å¤§å®¶äº†ã€‚

## ä¸€èµ·æˆé•¿

å¦‚æœæ‚¨æ„Ÿè§‰æœ‰æ”¶è·å¯ä»¥ç‚¹èµå…³æ³¨`æ¿€åŠ±æˆ‘`ï¼Œä¹Ÿæ¬¢è¿åˆ° [Github](https://github.com/pushmetop/30-seconds-for-everyday) åŠ ä¸ª starã€‚

![å¾®ä¿¡å…¬ä¼—å·](https://user-gold-cdn.xitu.io/2019/3/23/169a7432d41b5b62?w=200&h=208&f=png&s=33008)

> æœ¬æ–‡åŸç¨¿æ¥è‡ª [PushMeTop](https://github.com/pushmetop)